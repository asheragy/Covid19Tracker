(this.webpackJsonpcovid19tracker=this.webpackJsonpcovid19tracker||[]).push([[0],{151:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(41),o=t.n(i),s=(t(49),t(3)),c=t(4),u=t.n(c),l=t(9),v=t(6),d=(t(51),t(42));var h=function(e){r.a.createRef();var a={labels:e.dates,datasets:e.dataSets.map((function(e){return{fill:!1,label:e.label,data:e.data,pointBackgroundColor:e.color,pointBorderColor:e.color,backgroundColor:e.color,borderColor:e.color,borderWidth:2,pointRadius:2}}))};return r.a.createElement(d.Line,{data:a,options:{maintainAspectRatio:!1},height:400})};var k=function(e){return r.a.createElement("select",{onChange:function(a){e.onStateChange(a.target.value)}},p.map((function(e){return a=e.key,t=e.value,r.a.createElement("option",{value:a},t);var a,t})))};var p=[{key:"us",value:"United States"},{key:"AL",value:"Alabama"},{key:"AK",value:"Alaska"},{key:"AZ",value:"Arizona"},{key:"AR",value:"Arkansas"},{key:"CA",value:"California"},{key:"CO",value:"Colorado"},{key:"CT",value:"Connecticut"},{key:"DE",value:"Delaware"},{key:"FL",value:"Florida"},{key:"GA",value:"Georgia"},{key:"HI",value:"Hawaii"},{key:"ID",value:"Idaho"},{key:"IL",value:"Illinois"},{key:"IN",value:"Indiana"},{key:"IA",value:"Iowa"},{key:"KS",value:"Kansas"},{key:"KY",value:"Kentucky"},{key:"LA",value:"Louisiana"},{key:"ME",value:"Maine"},{key:"MD",value:"Maryland"},{key:"MA",value:"Massachusetts"},{key:"MI",value:"Michigan"},{key:"MN",value:"Minnesota"},{key:"MS",value:"Mississippi"},{key:"MO",value:"Missouri"},{key:"MT",value:"Montana"},{key:"NE",value:"Nebraska"},{key:"NV",value:"Nevada"},{key:"NH",value:"New Hampshire"},{key:"NJ",value:"New Jersey"},{key:"NM",value:"New Mexico"},{key:"NY",value:"New York"},{key:"NC",value:"North Carolina"},{key:"ND",value:"North Dakota"},{key:"OH",value:"Ohio"},{key:"OK",value:"Oklahoma"},{key:"OR",value:"Oregon"},{key:"PA",value:"Pennsylvania"},{key:"RI",value:"Rhode Island"},{key:"SC",value:"South Carolina"},{key:"SD",value:"South Dakota"},{key:"TN",value:"Tennessee"},{key:"TX",value:"Texas"},{key:"UT",value:"Utah"},{key:"VT",value:"Vermont"},{key:"VA",value:"Virginia"},{key:"WA",value:"Washington"},{key:"WV",value:"West Virginia"},{key:"WI",value:"Wisconsin"},{key:"WY",value:"Wyoming"}],y=t(43),m=function e(){Object(s.a)(this,e),this.positive=[],this.positiveNormalized=[],this.deaths=[],this.active=[],this.percentPositive=[],this.percentChange=[],this.dates=[]},f=function e(a,t,n){Object(s.a)(this,e),this.color=void 0,this.data=void 0,this.label=void 0,this.label=a,this.color=t,this.data=n};function g(e){var a=e.toString(),t=a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(6,2);return new Date(t)}var b=function(){function e(){Object(s.a)(this,e)}return Object(y.a)(e,[{key:"getSingleData",value:function(){var e=Object(l.a)(u.a.mark((function e(a){var t,n,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="us"==a?"https://api.covidtracking.com/v1/us/daily.json":"https://api.covidtracking.com/v1/states/".concat(a.toLowerCase(),"/daily.json"),console.log(t),e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,i=Array(r)[0].reverse(),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"getSeries",value:function(){var e=Object(l.a)(u.a.mark((function e(a){var t,n,r,i,o,s,c,l,v;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSingleData(a);case 2:return t=e.sent,console.log("Got ".concat(t.length," entries")),n=(t.length-1)%7,t=t.filter((function(e,a){return a%7==n})),r=t.findIndex((function(e){return e.positive>=100})),i=t.slice(r),o=new m,s=i.slice(1).map((function(e,a){return e.positive-i[a].positive})),o.positive=s.map((function(e){return Math.round(e/7)})),c=i.slice(1).map((function(e,a){var t=e.totalTestResults-i[a].totalTestResults;return t<0&&(t=e.totalTestsViral-i[a].totalTestsViral),t})),.5,l=s.map((function(e,a){return Math.min(e/c[a],.5)})),v=s.map((function(e,a){var t=l[a];return e*(t*=2*t)+e})).map((function(e){return Math.round(e/7)})),o.deaths=i.slice(1).map((function(e,a){return t=e.death-i[a].death,Math.round(10*t/7)/10;var t})),o.active=i.map((function(e,a){return a>=2?i[a].positive-i[a-2].positive:e.positive})).slice(1),o.dates=i.map((function(e){return g(e.date)})).slice(1),o.positiveNormalized=v,o.percentPositive=l.map((function(e){return Math.round(1e4*e)/100})),o.percentChange=v.map((function(e,a){if(a<3)return 0;var t=(e-v[a-3])/v[a-3];return t>2&&(t=2),Math.round(1e4*t)/100})),e.abrupt("return",o);case 22:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()}]),e}(),N="chart",O="large",w="small";var S=function(){var e=Object(n.useState)([]),a=Object(v.a)(e,2),t=a[0],i=a[1],o=Object(n.useState)([]),s=Object(v.a)(o,2),c=s[0],d=s[1],p=Object(n.useState)([]),y=Object(v.a)(p,2),m=y[0],g=y[1],S=Object(n.useState)([]),C=Object(v.a)(S,2),E=C[0],j=C[1],A=Object(n.useState)([]),D=Object(v.a)(A,2),I=D[0],T=D[1],x=Object(n.useState)([]),R=Object(v.a)(x,2),L=R[0],V=R[1],W=function(){var e=Object(l.a)(u.a.mark((function e(a){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new b,e.next=3,t.getSeries(a);case 3:n=e.sent,i(n.dates.map((function(e){return e.getUTCMonth()+1+"/"+e.getUTCDate()}))),d([new f("Positive / Day",M.LightBlue,n.positive),new f("Normalized",M.Blue,n.positiveNormalized)]),g([new f("Deaths / Day",M.Red,n.deaths)]),j([new f("Active cases",M.Green,n.active)]),T([new f("% Positive",M.Yellow,n.percentPositive)]),V([new f("% Change",M.Orange,n.percentChange)]);case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(k,{onStateChange:W}),r.a.createElement("div",{className:"chart"},r.a.createElement("div",{className:"chart-row"},r.a.createElement("div",{className:"".concat(N," ").concat(O)},r.a.createElement(h,{dates:t,dataSets:c})),r.a.createElement("div",{className:"".concat(N," ").concat(w)},r.a.createElement(h,{dates:t,dataSets:m}))),r.a.createElement("div",{className:"chart-row"},r.a.createElement("div",{className:"".concat(N," ").concat(w)},r.a.createElement(h,{dates:t,dataSets:E})),r.a.createElement("div",{className:"".concat(N," ").concat(w)},r.a.createElement(h,{dates:t,dataSets:I})),r.a.createElement("div",{className:"".concat(N," ").concat(w)},r.a.createElement(h,{dates:t,dataSets:L})))))},M=function e(){Object(s.a)(this,e)};M.Blue="rgba(34,132,245,1.0)",M.LightBlue="rgba(54,162,235,1.0)",M.Red="rgb(255,99,132)",M.Green="rgb(75, 192,192)",M.Yellow="rgb(250, 244, 82)",M.Orange="rgb(255,159,64)",o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root"))},44:function(e,a,t){e.exports=t(151)},49:function(e,a,t){},51:function(e,a,t){}},[[44,1,2]]]);
//# sourceMappingURL=main.9564b103.chunk.js.map